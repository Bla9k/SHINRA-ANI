@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: var(--font-poppins), sans-serif; /* Use Poppins font */
}

/* Define base and dark theme variables */
@layer base {
  :root {
    /* Default Dark Theme (Vanilla) */
    --background: 240 10% 3.9%; /* #0A0A0A */
    --foreground: 0 0% 98%; /* #FAFAFA */
    --card: 240 10% 10%; /* #1A1A1A */
    --card-foreground: 0 0% 98%; /* #FAFAFA */
    --popover: 240 10% 3.9%; /* #0A0A0A */
    --popover-foreground: 0 0% 98%; /* #FAFAFA */
    --primary: 221 83% 53%; /* Electric Blue #1D4ED8 */
    --primary-foreground: 0 0% 98%; /* #FAFAFA */
    --secondary: 240 4% 16%; /* Darker Gray #292929 */
    --secondary-foreground: 0 0% 98%; /* #FAFAFA */
    --muted: 240 4% 16%; /* Darker Gray #292929 */
    --muted-foreground: 240 5% 65%; /* Lighter Gray #A1A1AA */
    --accent: 221 83% 53%; /* Electric Blue #1D4ED8 */
    --accent-foreground: 0 0% 98%; /* #FAFAFA */
    --destructive: 0 72% 51%; /* Red */
    --destructive-foreground: 0 0% 98%; /* #FAFAFA */
    --border: 240 4% 20%; /* Slightly lighter border #333333 */
    --input: 240 4% 20%; /* #333333 */
    --ring: 221 83% 53%; /* Electric Blue #1D4ED8 */
    --chart-1: 221 83% 53%; /* Electric Blue */
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }

  .dark {
     /* Re-apply variables for consistency, although :root should suffice */
    --background: 240 10% 3.9%;;
    --foreground: 0 0% 98%;
    --card: 240 10% 10%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 221 83% 53%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4% 16%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 4% 16%;
    --muted-foreground: 240 5% 65%;
    --accent: 221 83% 53%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 4% 20%;
    --input: 240 4% 20%;
    --ring: 221 83% 53%;
    --chart-1: 221 83% 53%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }
}

/* Hypercharged Theme Variables */
@layer base {
  /* Apply hypercharged variables using the data attribute set by next-themes */
  html[data-theme="hypercharged"] {
    /* Defined Colors */
    --hc-deep-space-blue: 225 15% 6%; /* Background */
    --hc-neon-purple: 275 70% 60%;    /* Primary */
    --hc-neon-cyan: 180 100% 50%;   /* Secondary */
    --hc-electric-green: 95 100% 50%;  /* Accent / Buttons */
    --hc-light-cyan-tint: 180 100% 85%; /* Foreground */
    --hc-dark-purple-base: 275 50% 15%; /* Card Background */
    --hc-dimmer-purple-border: 275 70% 40%; /* Borders */
    --hc-darker-purple-input: 275 50% 20%; /* Inputs */
    --hc-muted-cyan-gray: 180 10% 60%; /* Muted Foreground */
    --hc-bright-red: 0 80% 60%;       /* Destructive */

    /* Mapped Variables */
    --background: var(--hc-deep-space-blue);
    --foreground: var(--hc-light-cyan-tint);

    --card: var(--hc-dark-purple-base);
    --card-foreground: var(--hc-light-cyan-tint);

    --popover: 0 0% 5%; /* Very dark */
    --popover-foreground: var(--hc-light-cyan-tint);

    --primary: var(--hc-neon-purple);
    --primary-foreground: 0 0% 98%; /* White */

    --secondary: var(--hc-neon-cyan);
    --secondary-foreground: var(--hc-deep-space-blue); /* Dark BG for contrast */

    --muted: 0 0% 10%; /* Slightly lighter black */
    --muted-foreground: var(--hc-muted-cyan-gray);

    --accent: var(--hc-electric-green);
    --accent-foreground: var(--hc-deep-space-blue); /* Dark BG for contrast */

    --destructive: var(--hc-bright-red);
    --destructive-foreground: 0 0% 98%; /* White */

    --border: var(--hc-dimmer-purple-border);
    --input: var(--hc-darker-purple-input);
    --ring: var(--hc-neon-cyan); /* Ring color matches secondary */

    /* Chart colors */
    --chart-1: var(--hc-neon-purple);
    --chart-2: var(--hc-neon-cyan);
    --chart-3: var(--hc-electric-green);
    --chart-4: 320 80% 70%; /* Neon Pinkish */
    --chart-5: 50 100% 60%; /* Neon Yellow */
  }

  /* Hypercharge specific glassmorphism with neon edges */
  html[data-theme="hypercharged"] .glass {
    /* Intense glass effect for hypercharged */
    @apply bg-card/80 backdrop-blur-xl border border-primary/60 shadow-[0_0_15px_theme(colors.primary),_0_0_30px_theme(colors.secondary)];
    /* Use CSS variables directly for better theme control */
    --tw-shadow-color-primary: hsl(var(--primary));
    --tw-shadow-color-secondary: hsl(var(--secondary));
    --tw-shadow: 0 0 15px var(--tw-shadow-color-primary), 0 0 30px var(--tw-shadow-color-secondary);
    --tw-shadow-colored: 0 0 15px var(--tw-shadow-color), 0 0 30px var(--tw-shadow-color);
    box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
  }

   /* Hypercharge specific scrollbar */
    html[data-theme="hypercharged"] .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: hsl(var(--secondary) / 0.7); /* Cyan thumb */
        box-shadow: 0 0 5px hsl(var(--secondary)); /* Cyan glow */
    }
    html[data-theme="hypercharged"] .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        background-color: hsl(var(--secondary) / 0.9);
    }
    html[data-theme="hypercharged"] .scrollbar-thin {
        scrollbar-color: hsl(var(--secondary) / 0.7) transparent;
    }

     /* Specific styles for Hypercharge theme components */
     html[data-theme="hypercharged"] .hypercharge-nav {
        /* Intense gradient, stronger border, more pronounced shadow */
        @apply bg-gradient-to-r from-primary/30 via-black/80 to-secondary/30 border-t border-secondary/60 backdrop-blur-2xl shadow-[0_-5px_25px_theme(colors.secondary/40)];
     }

     html[data-theme="hypercharged"] .hypercharge-button {
        /* Gradient, maybe slight glow on hover */
        @apply bg-gradient-to-br from-accent to-green-400 text-black hover:shadow-[0_0_10px_theme(colors.accent)];
     }

     html[data-theme="hypercharged"] .neon-text-primary {
        text-shadow: 0 0 5px hsl(var(--primary)), 0 0 10px hsl(var(--primary) / 0.7);
     }
      html[data-theme="hypercharged"] .neon-text-secondary {
        text-shadow: 0 0 5px hsl(var(--secondary)), 0 0 10px hsl(var(--secondary) / 0.7);
     }
      html[data-theme="hypercharged"] .neon-text-accent {
        text-shadow: 0 0 5px hsl(var(--accent)), 0 0 10px hsl(var(--accent) / 0.7);
     }

      html[data-theme="hypercharged"] .hypercharge-glow {
         filter: drop-shadow(0 0 8px hsl(var(--primary)/ 0.8));
       }

      html[data-theme="hypercharged"] .hypercharge-input {
         @apply border-secondary/50 ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-secondary focus-visible:ring-offset-2 hover:border-secondary;
      }
}

/* Base Styles */
@layer base {
  * {
    @apply border-border;
  }
  html {
      @apply h-full scroll-smooth; /* Add smooth scrolling */
  }
  body {
    @apply bg-background text-foreground;
    /* Transition for theme change - Apply to body for background */
    @apply transition-colors duration-500 ease-in-out;
  }

  /* Default glassmorphism for vanilla theme */
  .glass:not(html[data-theme="hypercharged"] *) { /* Apply only if not hypercharged */
    @apply bg-card/60 backdrop-blur-lg border border-border/50 shadow-lg transition-all duration-300;
  }

   /* Base transition for smooth theme switching */
   .transition-smooth {
      @apply transition-all duration-500 ease-in-out;
   }

   /* Ensure active nav items have smooth color transition */
    .active-nav-item {
       color: hsl(var(--primary)); /* Active color */
       transition: color 0.3s ease-in-out; /* Smooth transition */
    }
    /* Remove background hover effect for nav items */
    .nav-item-base:hover {
       @apply bg-transparent;
    }
    /* Smooth color transition on hover for non-active items */
     .nav-item-base.text-muted-foreground:hover {
        color: hsl(var(--primary));
        transition: color 0.3s ease-in-out;
     }

}

/* Custom Scrollbar Styling (Apply to both themes) */
/* Basic thin scrollbar */
.scrollbar-thin {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: hsl(var(--muted)) transparent; /* Firefox */
}

/* Webkit (Chrome, Safari, Edge) */
.scrollbar-thin::-webkit-scrollbar {
  width: 8px; /* Width of vertical scrollbar */
  height: 8px; /* Height of horizontal scrollbar */
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent; /* Track background */
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: hsl(var(--muted)); /* Scrollbar thumb color */
  border-radius: 10px; /* Rounded corners */
  border: 2px solid transparent; /* Creates padding around thumb */
  background-clip: content-box; /* Makes border transparent */
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--muted-foreground)); /* Thumb color on hover */
}

/* Utility for text shadow */
.shadow-text {
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
}

/* Animation Utilities */
@layer utilities {
    /* Standard Fade In */
    .animate-fade-in {
        opacity: 0;
        animation: fadeIn 0.5s ease-out forwards;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(5px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Subtle Pulse */
    .animate-pulse-subtle {
        animation: pulse-subtle 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
     @keyframes pulse-subtle {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
    }

    /* Standard Pulse */
    .animate-pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: .5; }
    }

     /* Hypercharge Theme Animations */
     .animate-hyper-fade-in {
       animation: hyperFadeIn 0.8s ease-out forwards;
     }
     @keyframes hyperFadeIn {
       from { opacity: 0; transform: scale(0.95) translateY(10px); filter: blur(5px); }
       to { opacity: 1; transform: scale(1) translateY(0); filter: blur(0px); }
     }

     .animate-hyper-slide-in {
       animation: hyperSlideIn 0.6s cubic-bezier(0.25, 1, 0.5, 1) forwards;
     }
     @keyframes hyperSlideIn {
       from { opacity: 0; transform: translateX(-30px); }
       to { opacity: 1; transform: translateX(0); }
     }

      .animate-neon-pulse {
         animation: neonPulse 1.5s infinite alternate;
      }
      @keyframes neonPulse {
          from { filter: drop-shadow(0 0 5px hsl(var(--primary)/0.6)); }
          to { filter: drop-shadow(0 0 15px hsl(var(--primary)/0.9)); }
       }

        /* Glitch effect (more complex) */
       .animate-glitch {
         position: relative;
         animation: glitch 1s linear infinite;
       }
        .animate-glitch::before,
        .animate-glitch::after {
          content: attr(data-text); /* Requires data-text attribute on the element */
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: var(--background); /* Match background */
          overflow: hidden;
        }
       .animate-glitch::before {
         left: 2px;
         text-shadow: -1px 0 hsl(var(--secondary)); /* Cyan */
         clip: rect(44px, 450px, 56px, 0);
         animation: glitch-anim 2s infinite linear alternate-reverse;
       }
       .animate-glitch::after {
         left: -2px;
         text-shadow: -1px 0 hsl(var(--accent)); /* Green */
         clip: rect(85px, 450px, 140px, 0);
         animation: glitch-anim-2 3s infinite linear alternate-reverse;
       }

       @keyframes glitch-anim {
         0% { clip: rect(42px, 9999px, 44px, 0); }
         5% { clip: rect(17px, 9999px, 94px, 0); }
         /* ... Add more steps for complex glitch ... */
         100% { clip: rect(92px, 9999px, 98px, 0); }
       }
       @keyframes glitch-anim-2 {
         0% { clip: rect(65px, 9999px, 119px, 0); }
          5% { clip: rect(79px, 9999px, 19px, 0); }
          /* ... Add more steps ... */
          100% { clip: rect(18px, 9999px, 130px, 0); }
       }
}
